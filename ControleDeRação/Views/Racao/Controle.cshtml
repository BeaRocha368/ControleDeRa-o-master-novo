@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model ControleDeRação.Models.Racao
@{
    ViewData["Title"] = "Controle de Ração";
    // Tenta obter o nome do Pet para exibir no título
    string petNome = Model.Pet != null ? Model.Pet.Nome : "Pet (ID: " + Model.PetId + ")";
}

<main class="content">
    <div class="content-box">
        <h2 class="box-title">CONTROLE DE RAÇÃO (@petNome)</h2>

        @if (Model.AlertaEstoqueBaixo)
        {
            <div class="alert alert-danger text-center">
                <strong>ALERTA! ESTOQUE BAIXO:</strong> @Model.DiasRestantes dias restantes.
            </div>
        }

        <form asp-controller="Racao" asp-action="AtualizaEstoque" method="post">
            @Html.AntiForgeryToken()

            <input type="hidden" asp-for="PetId" />
            <input type="hidden" asp-for="Id" />
            <input type="hidden" asp-for="EstoqueAtualKg" /> <div class="form-group">
                <label for="quantidadeComprada">Quantidade comprada (KG):</label>
                <input type="number"
                       step="0.01"
                       id="quantidadeComprada"
                       name="quantidadeComprada"
                       class="form-control"
                       placeholder="Em KG" />
            </div>

            <div class="form-group">
                <label for="consumoDiario">Consumo diário (KG/dia):</label>
                <input asp-for="ConsumoDiarioKg"
                       type="number"
                       step="0.01"
                       class="form-control"
                       placeholder="Em KG"
                       name="consumoDiario" />
            </div>

            <div class="form-group">
                <label>Estoque atual (KG):</label>
                <input type="text"
                       class="form-control"
                       value="@(Model.EstoqueAtualKg.ToString("F2")) KG"
                       disabled />
                <small class="form-text text-muted">Estoque para aproximadamente @Model.DiasRestantes dias.</small>
            </div>

            <br />

            <div class="btn-group">
                <button type="submit" class="btn btn-success btn-submit">SALVAR / ATUALIZAR</button>
            </div>
            <br />
            <div class="btn-group">
                <a href="#" class="btn btn-warning">EDITAR (Não implementado no back)</a>
            </div>

            <div class="btn-group" style="margin-top: 10px;">
                <a asp-controller="Pet" asp-action="ResultadoConsulta" asp-route-codigo="@Model.Pet.CodigoAcesso" class="btn btn-secondary">Voltar</a>
            </div>
        </form>
    </div>
</main>
